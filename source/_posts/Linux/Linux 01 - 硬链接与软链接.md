---
title: Linux 01 - 硬链接与软链接
date: 2018-11-27 14:05:58
categories: Linux
---
# 硬链接与软链接

<!--more-->

在Linux中文件被分为用户数据(user data)与元数据(metadata).

用户数据, 即为文件数据块(data block), 是记录文件真实内容的地方.

元数据是文件的附加属性, 如文件大小, 创建时间, 所有者等信息.

在Linux中, 元数据中的inode号(inode是文件元数据的一部分但其不包括文件名, inode号即索引节点号)才是文件的唯一标识而非文件名. 文件名仅是为了方便人们的记忆和使用, 系统或程序通过indoe号寻找正确的文件数据块.

![hard_link](https://res.cloudinary.com/dpe4i978o/image/upload/v1543299774/linux/hard_link.jpg)

为了解决文件的共享使用, Linux系统引入了两种链接: 硬链接(hard link)与软链接(又称符号链接, 即soft link或symbolic link). 链接为Linux系统解决了文件的共享使用, 还带来了隐藏文件路径, 增加权限安全及节省存储等好处.

## 硬链接

如果一个inode号对应了多个文件名, 则称这些文件为硬链接. 换言之, 硬链接就是同一个文件使用了多个别名.

由于硬链接是有着相同inode号仅文件名不同的文件, 因此硬链接存在一下特性:

1. 文件有相同的inode以及data block.
2. 只能对已经存在的文件进行创建.
3. 不能交叉文件系统进行硬链接的创建.
4. 不能对目录进行创建, 只能对文件进行创建.
5. 删除一个硬链接文件并不影响其他有相同inode号的文件.

## 软链接

![soft_link](https://res.cloudinary.com/dpe4i978o/image/upload/v1543299774/linux/soft_link.jpg)

软链接与硬链接不同, 若文件用户数据块中存放的内容是另一个文件路径名的指向, 则该文件就是软链接. 软链接就是一个普通文件, 只是数据块内容有点特殊. 软链接有着自己的inode号以及用户数据块, 因此软链接的创建与使用没有类似硬链接的诸多限制:

1. 软链接有着自己的文件属性以及权限.
2. 可对不存在的文件或目录创建软链接.
3. 软链接可交叉文件系统.
4. 创建软链接时, 链接计数i_nlink不会增加.
5. 删除软链接并不影响被指向的文件, 但如果被指向的源文件被删除, 则相关软链接被称为死链接, 即dangling link, 若被指向路径文件被重新创建, 死链接可恢复为正常的软链接.

事实上, 我们可以把硬链接看作是指向磁盘空间的一级指针, 而软链接则是指向指针的多级指针.