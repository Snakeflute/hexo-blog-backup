---
title: Networks 01 - TCP三次握手
date: 2018-07-31 23:37:07
categories: Networks
---
# TCP三次握手

<!--more-->

## 过程

![fuck](https://res.cloudinary.com/dpe4i978o/image/upload/v1533055569/internet/shake-hands.png)

1. 首先B处于监听状态, 等待客户的请求连接.

2. A向B发送连接请求报文, SYN = 1, ACK = 0, 选择一个初始的序号seq = x.

3. B收到连接请求, 如果同意连接, 那么向A发送连接确认报文, SYN = 1, ACK = 1, 确认号ack = x + 1, 同时选择序号seq = y.

4. A收到B的连接确认报文段后, 要向B发送确认, 确认号ack = y + 1, seq = x + 1.

5. B收到A的确认后建立连接.

## 三次握手的原因

第三次握手是防止失效的请求到达服务器, 让服务器错误打开连接.

客户端发送一个连接请求, 如果在网络中阻塞超过重传时间, 那么就会重新发送连接请求. 但是之前滞留的连接请求最后还是会到达服务器, 如果不进行第三次握手, 那么服务器就会建立一个无效连接, 浪费资源.